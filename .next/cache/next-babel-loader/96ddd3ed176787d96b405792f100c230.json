{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _this = this,\n  _jsxFileName = \"F:\\\\Next\\\\google-books\\\\pages\\\\index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { useState } from 'react';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport fetch from 'isomorphic-unfetch';\nimport { Layout, SearchBar, BookDetails, BookListBar } from '../components';\nvar Homepage = function Homepage() {\n  var _useState = useState({\n      keyword: '',\n      items: [],\n      item: {}\n    }),\n    treatise = _useState[0],\n    setTreatise = _useState[1];\n  var _useState2 = useState(new Set()),\n    booklist = _useState2[0],\n    setBookList = _useState2[1];\n  var _useState3 = useState(false),\n    showBookListBar = _useState3[0],\n    setShowBookListBar = _useState3[1];\n  var _useState4 = useState(false),\n    focusSearch = _useState4[0],\n    setFocusSearch = _useState4[1];\n  var toggleBookListBar = function toggleBookListBar() {\n    setShowBookListBar(!showBookListBar); // Toggle the visibility\n  };\n\n  // Search book by keyword\n  var searchHandler = function searchHandler(e) {\n    var keyword = e.target.value;\n    if (keyword) {\n      fetch(\"\".concat(process.env.apiUrl, \"/volumes?q=\").concat(keyword, \"&maxResults=5\")).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data.totalItems > 0) {\n          setTreatise(_objectSpread({}, treatise, {\n            keyword: keyword,\n            items: data.items\n          }));\n        }\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    } else {\n      setTreatise(_objectSpread({}, treatise, {\n        items: []\n      }));\n    }\n  };\n\n  // Get specific treatise\n  var getTreatiseHandler = function getTreatiseHandler(id) {\n    var items = treatise.items;\n    var targetItem = items.filter(function (item) {\n      return item.id === id;\n    })[0];\n    setTreatise({\n      keyword: '',\n      items: [],\n      item: targetItem\n    });\n  };\n  var isEmptyObject = function isEmptyObject(obj) {\n    return Object.keys(obj).length === 0;\n  };\n  var addBooklist = function addBooklist() {\n    setBookList(function (prevBookList) {\n      return new Set([].concat(_toConsumableArray(prevBookList), [treatise.item]));\n    }); // Update booklist as a new Set with added item\n  };\n\n  var handleFocus = function handleFocus() {\n    setFocusSearch(true);\n  };\n  var handleBlur = function handleBlur() {\n    setFocusSearch(false);\n  };\n  var keyword = treatise.keyword,\n    items = treatise.items,\n    item = treatise.item;\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, __jsx(BookListBar, {\n    showBookListBar: showBookListBar,\n    booklist: booklist,\n    toggleBookListBar: toggleBookListBar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), __jsx(Layout, {\n    showBookListBar: !showBookListBar,\n    focusSearch: !focusSearch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    md: {\n      span: 8,\n      offset: 2\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, __jsx(SearchBar, {\n    value: keyword,\n    data: items,\n    booklist: booklist,\n    changeHandler: searchHandler,\n    clickHandler: getTreatiseHandler,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    toggleBookListBar: toggleBookListBar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }), isEmptyObject(item) ? __jsx(React.Fragment, null) : __jsx(BookDetails, {\n    data: item,\n    addBooklist: addBooklist,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 46\n    }\n  }))))));\n};\nexport default Homepage;","map":{"version":3,"names":["useState","Container","Row","Col","fetch","Layout","SearchBar","BookDetails","BookListBar","Homepage","_useState","keyword","items","item","treatise","setTreatise","_useState2","Set","booklist","setBookList","_useState3","showBookListBar","setShowBookListBar","_useState4","focusSearch","setFocusSearch","toggleBookListBar","searchHandler","e","target","value","concat","process","env","apiUrl","then","res","json","data","totalItems","_objectSpread","err","console","log","getTreatiseHandler","id","targetItem","filter","isEmptyObject","obj","Object","keys","length","addBooklist","prevBookList","_toConsumableArray","handleFocus","handleBlur","__jsx","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","md","span","offset","changeHandler","clickHandler","onFocus","onBlur","React","Fragment"],"sources":["F:/Next/google-books/pages/index.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { Container, Row, Col } from 'react-bootstrap';\r\nimport fetch from 'isomorphic-unfetch';\r\n\r\nimport { Layout, SearchBar, BookDetails, BookListBar } from '../components';\r\n\r\nconst Homepage = () => {\r\n  const [treatise, setTreatise] = useState({\r\n    keyword: '',\r\n    items: [],\r\n    item: {}\r\n  });\r\n\r\n  const [booklist, setBookList] = useState(new Set());\r\n  const [showBookListBar, setShowBookListBar] = useState(false);\r\n  const [focusSearch, setFocusSearch] = useState(false);\r\n\r\n  const toggleBookListBar = () => {\r\n    setShowBookListBar(!showBookListBar); // Toggle the visibility\r\n  };  \r\n\r\n  // Search book by keyword\r\n  const searchHandler = (e) => {\r\n    const keyword = e.target.value;\r\n\r\n    if (keyword) {\r\n      fetch(`${process.env.apiUrl}/volumes?q=${keyword}&maxResults=5`)\r\n        .then((res) => res.json())\r\n        .then((data) => {\r\n          if (data.totalItems > 0) {\r\n            setTreatise({ \r\n              ...treatise,\r\n              keyword: keyword,\r\n              items: data.items\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    } else {\r\n      setTreatise({ \r\n        ...treatise,\r\n        items: [] \r\n      });\r\n    }\r\n  };\r\n\r\n  // Get specific treatise\r\n  const getTreatiseHandler = (id) => {\r\n    const { items } = treatise;\r\n    const targetItem = items.filter(item => item.id === id)[0];\r\n    \r\n    setTreatise({\r\n      keyword: '',\r\n      items: [],\r\n      item: targetItem\r\n    });\r\n  };\r\n\r\n  const isEmptyObject = (obj) => {\r\n    return Object.keys(obj).length === 0;\r\n  };\r\n\r\n  const addBooklist = () => {\r\n    setBookList(prevBookList => new Set([...prevBookList, treatise.item])); // Update booklist as a new Set with added item\r\n  };\r\n\r\n  const handleFocus = () => {\r\n    setFocusSearch(true);\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    setFocusSearch(false);\r\n  };\r\n\r\n  const { keyword, items, item } = treatise;\r\n\r\n  return (\r\n    <div>\r\n      <BookListBar showBookListBar={showBookListBar} booklist={booklist} toggleBookListBar={toggleBookListBar} />\r\n      <Layout showBookListBar={!showBookListBar} focusSearch={!focusSearch}>\r\n        <Container>\r\n          <Row>\r\n            <Col md={{ span: 8, offset: 2 }}>\r\n              <SearchBar\r\n                value={keyword}\r\n                data={items}\r\n                booklist={booklist}\r\n                changeHandler={searchHandler}\r\n                clickHandler={getTreatiseHandler}\r\n                onFocus={handleFocus}\r\n                onBlur={handleBlur}\r\n                toggleBookListBar={toggleBookListBar}\r\n              />\r\n              {isEmptyObject(item) ? <></> : <BookDetails data={item} addBooklist={addBooklist} />}\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n      </Layout>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}