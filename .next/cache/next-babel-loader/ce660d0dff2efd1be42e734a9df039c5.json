{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.getEventSourceWrapper = getEventSourceWrapper;\nvar eventCallbacks = [];\nfunction EventSourceWrapper(options) {\n  var source;\n  var lastActivity = new Date();\n  var listeners = [];\n  if (!options.timeout) {\n    options.timeout = 20 * 1000;\n  }\n  init();\n  var timer = setInterval(function () {\n    if (new Date() - lastActivity > options.timeout) {\n      handleDisconnect();\n    }\n  }, options.timeout / 2);\n  function init() {\n    source = new window.EventSource(options.path);\n    source.onopen = handleOnline;\n    source.onerror = handleDisconnect;\n    source.onmessage = handleMessage;\n  }\n  function handleOnline() {\n    if (options.log) console.log('[HMR] connected');\n    lastActivity = new Date();\n  }\n  function handleMessage(event) {\n    lastActivity = new Date();\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i](event);\n    }\n    if (event.data.indexOf('action') !== -1) {\n      eventCallbacks.forEach(function (cb) {\n        return cb(event);\n      });\n    }\n  }\n  function handleDisconnect() {\n    clearInterval(timer);\n    source.close();\n    setTimeout(init, options.timeout);\n  }\n  return {\n    close: function close() {\n      clearInterval(timer);\n      source.close();\n    },\n    addMessageListener: function addMessageListener(fn) {\n      listeners.push(fn);\n    }\n  };\n}\nfunction getEventSourceWrapper(options) {\n  if (!options.ondemand) {\n    return {\n      addMessageListener: function addMessageListener(cb) {\n        eventCallbacks.push(cb);\n      }\n    };\n  }\n  return EventSourceWrapper(options);\n}","map":{"version":3,"names":["exports","__esModule","getEventSourceWrapper","eventCallbacks","EventSourceWrapper","options","source","lastActivity","Date","listeners","timeout","init","timer","setInterval","handleDisconnect","window","EventSource","path","onopen","handleOnline","onerror","onmessage","handleMessage","log","console","event","i","length","data","indexOf","forEach","cb","clearInterval","close","setTimeout","addMessageListener","fn","push","ondemand"],"sources":["F:/Next/google-books/node_modules/next/dist/client/dev/error-overlay/eventsource.js"],"sourcesContent":["\"use strict\";exports.__esModule=true;exports.getEventSourceWrapper=getEventSourceWrapper;var eventCallbacks=[];function EventSourceWrapper(options){var source;var lastActivity=new Date();var listeners=[];if(!options.timeout){options.timeout=20*1000;}init();var timer=setInterval(function(){if(new Date()-lastActivity>options.timeout){handleDisconnect();}},options.timeout/2);function init(){source=new window.EventSource(options.path);source.onopen=handleOnline;source.onerror=handleDisconnect;source.onmessage=handleMessage;}function handleOnline(){if(options.log)console.log('[HMR] connected');lastActivity=new Date();}function handleMessage(event){lastActivity=new Date();for(var i=0;i<listeners.length;i++){listeners[i](event);}if(event.data.indexOf('action')!==-1){eventCallbacks.forEach(cb=>cb(event));}}function handleDisconnect(){clearInterval(timer);source.close();setTimeout(init,options.timeout);}return{close:()=>{clearInterval(timer);source.close();},addMessageListener:function addMessageListener(fn){listeners.push(fn);}};}function getEventSourceWrapper(options){if(!options.ondemand){return{addMessageListener:cb=>{eventCallbacks.push(cb);}};}return EventSourceWrapper(options);}"],"mappings":"AAAA,YAAY;;AAACA,OAAO,CAACC,UAAU,GAAC,IAAI;AAACD,OAAO,CAACE,qBAAqB,GAACA,qBAAqB;AAAC,IAAIC,cAAc,GAAC,EAAE;AAAC,SAASC,kBAAkBA,CAACC,OAAO,EAAC;EAAC,IAAIC,MAAM;EAAC,IAAIC,YAAY,GAAC,IAAIC,IAAI,CAAC,CAAC;EAAC,IAAIC,SAAS,GAAC,EAAE;EAAC,IAAG,CAACJ,OAAO,CAACK,OAAO,EAAC;IAACL,OAAO,CAACK,OAAO,GAAC,EAAE,GAAC,IAAI;EAAC;EAACC,IAAI,CAAC,CAAC;EAAC,IAAIC,KAAK,GAACC,WAAW,CAAC,YAAU;IAAC,IAAG,IAAIL,IAAI,CAAC,CAAC,GAACD,YAAY,GAACF,OAAO,CAACK,OAAO,EAAC;MAACI,gBAAgB,CAAC,CAAC;IAAC;EAAC,CAAC,EAACT,OAAO,CAACK,OAAO,GAAC,CAAC,CAAC;EAAC,SAASC,IAAIA,CAAA,EAAE;IAACL,MAAM,GAAC,IAAIS,MAAM,CAACC,WAAW,CAACX,OAAO,CAACY,IAAI,CAAC;IAACX,MAAM,CAACY,MAAM,GAACC,YAAY;IAACb,MAAM,CAACc,OAAO,GAACN,gBAAgB;IAACR,MAAM,CAACe,SAAS,GAACC,aAAa;EAAC;EAAC,SAASH,YAAYA,CAAA,EAAE;IAAC,IAAGd,OAAO,CAACkB,GAAG,EAACC,OAAO,CAACD,GAAG,CAAC,iBAAiB,CAAC;IAAChB,YAAY,GAAC,IAAIC,IAAI,CAAC,CAAC;EAAC;EAAC,SAASc,aAAaA,CAACG,KAAK,EAAC;IAAClB,YAAY,GAAC,IAAIC,IAAI,CAAC,CAAC;IAAC,KAAI,IAAIkB,CAAC,GAAC,CAAC,EAACA,CAAC,GAACjB,SAAS,CAACkB,MAAM,EAACD,CAAC,EAAE,EAAC;MAACjB,SAAS,CAACiB,CAAC,CAAC,CAACD,KAAK,CAAC;IAAC;IAAC,IAAGA,KAAK,CAACG,IAAI,CAACC,OAAO,CAAC,QAAQ,CAAC,KAAG,CAAC,CAAC,EAAC;MAAC1B,cAAc,CAAC2B,OAAO,CAAC,UAAAC,EAAE;QAAA,OAAEA,EAAE,CAACN,KAAK,CAAC;MAAA,EAAC;IAAC;EAAC;EAAC,SAASX,gBAAgBA,CAAA,EAAE;IAACkB,aAAa,CAACpB,KAAK,CAAC;IAACN,MAAM,CAAC2B,KAAK,CAAC,CAAC;IAACC,UAAU,CAACvB,IAAI,EAACN,OAAO,CAACK,OAAO,CAAC;EAAC;EAAC,OAAM;IAACuB,KAAK,EAAC,SAAAA,MAAA,EAAI;MAACD,aAAa,CAACpB,KAAK,CAAC;MAACN,MAAM,CAAC2B,KAAK,CAAC,CAAC;IAAC,CAAC;IAACE,kBAAkB,EAAC,SAASA,kBAAkBA,CAACC,EAAE,EAAC;MAAC3B,SAAS,CAAC4B,IAAI,CAACD,EAAE,CAAC;IAAC;EAAC,CAAC;AAAC;AAAC,SAASlC,qBAAqBA,CAACG,OAAO,EAAC;EAAC,IAAG,CAACA,OAAO,CAACiC,QAAQ,EAAC;IAAC,OAAM;MAACH,kBAAkB,EAAC,SAAAA,mBAAAJ,EAAE,EAAE;QAAC5B,cAAc,CAACkC,IAAI,CAACN,EAAE,CAAC;MAAC;IAAC,CAAC;EAAC;EAAC,OAAO3B,kBAAkB,CAACC,OAAO,CAAC;AAAC"},"metadata":{},"sourceType":"script"}